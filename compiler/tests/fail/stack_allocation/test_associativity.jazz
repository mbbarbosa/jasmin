// It is expected to fail
export fn main (reg u64 i) -> reg u64 {
  reg u64 res;
  stack u64[2] s;
  reg ptr u64[2] r;
  reg ptr u64[1] r1 r2;

  s[0] = 1;
  r = s[(int)i:2];

  r1 = r[0:1];
  r1[0] = 0;

  s[(int)i:1] = r1;

  res = s[0];

  return res;
}
